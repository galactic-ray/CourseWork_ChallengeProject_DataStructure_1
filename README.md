#
# 辽宁省汽车牌照快速查询系统

## 1. 项目简介

本项目是一个面向课程综合训练的 C++ 程序，围绕 **辽宁省小型汽车车牌（辽 + 字母 + 5 位编号）** 提供从录入、查询、排序到性能分析的完整解决方案。  
系统同时提供 **命令行界面 (CLI)** 和 **Qt GUI**，两种界面共享同一套核心算法与数据结构。

---

## 2. 功能特性

- **数据管理**：手工录入 / 文件导入 / 随机生成；支持增、删、改、查。
- **算法支持**：
  - 静态链表链式基数排序（LSD）
  - 折半查找 + 顺序查找
  - 城市分块索引查找
  - 车牌前缀模糊查询
- **统计分析**：全量统计、城市统计、性能统计（耗时 & 次数）、数据完整性验证。
- **文件操作**：文本导入导出、CSV 导出。
- **界面体验**：CLI 控制台菜单 + Qt GUI 面板（包含输入验证、操作日志、表格展示）。

---

## 3. 车牌规则（辽宁省）

- **格式**：`辽 + 1 位字母（A-Z，排除 I/O） + 5 位编号（数字或字母，排除 I/O）`
- **示例**：`辽A1234B`、`辽B72C9D`
- **字母与城市对照**：

| 字母 | 城市 | 字母 | 城市 |
| ---- | ---- | ---- | ---- |
| A | 沈阳 | H | 营口 |
| B | 大连 | J | 阜新 |
| C | 鞍山 | K | 辽阳 |
| D | 抚顺 | L | 盘锦 |
| E | 本溪 | M | 铁岭 |
| F | 丹东 | N | 朝阳 |
| G | 锦州 | P | 葫芦岛 |

随机生成、录入验证、城市匹配等逻辑均严格遵循上述规范。

---

## 4. 目录结构

```
code1/
├── CMakeLists.txt          # 顶层构建脚本（唯一编译方式）
├── include/                # 头文件
├── src/                    # 核心实现
├── gui/                    # GUI 源码与子 CMakeLists
├── tests/                  # 单元 / 场景测试
├── main.cpp                # CLI 入口
└── README.md               # 本文档（唯一说明）
```

核心算法封装为 `platecore` 静态库，CLI、GUI、测试统一链接该库，杜绝重复实现。

---

## 5. 构建与运行（唯一方式：CMake）

### 5.1 环境依赖

| 组件 | 版本要求 | 说明 |
| ---- | ---- | ---- |
| CMake | ≥ 3.10 | 统一构建入口 |
| C++ 编译器 | 支持 C++11 | g++ / clang / MSVC 均可 |
| Qt | ≥ 5.9 | 仅 GUI 需要，CLI & tests 不依赖 |

Ubuntu 安装示例：
```bash
sudo apt-get install build-essential cmake qtbase5-dev qtchooser qt5-qmake qtbase5-dev-tools
```

### 5.2 构建步骤

```bash
cd code1
mkdir build && cd build
cmake ..
cmake --build .
```

编译产物位于 `build/`：
- `bin/plate_cli`      —— CLI 主程序
- `bin/plate_tests`    —— 测试程序
- `bin/PlateQuerySystem` —— Qt GUI

> **TIP**：若只需 CLI，可在执行 `cmake --build . --target plate_cli` 时仅编译该目标；同理，`plate_tests`、`PlateQuerySystem` 可分别单独构建。

### 5.3 运行

```bash
# CLI
./bin/plate_cli

# 测试
./bin/plate_tests

# GUI（需 Qt 运行时）
./bin/PlateQuerySystem
```

---

## 6. CLI 菜单速览

1. **数据录入**：手工、文件、随机（随机生成自动保证车牌与城市匹配）
2. **数据管理**：显示全部 / 修改 / 删除
3. **排序与查找**：链式基数排序、折半查找（自动提示先排序）、城市索引查找、前缀查找
4. **统计分析**：总览、城市排行、性能统计、数据验证
5. **文件操作**：保存 TXT、导出 CSV
6. **系统维护**：清空数据

CLI 菜单配合输入校验、提示信息，可快速完成日常操作。

---

## 7. GUI 使用要点

GUI 采用 Qt Widgets 架构，主要由左侧操作面板 + 中部表格 + 右侧日志面板组成。

- **车牌输入**：自动转大写，并依据字母自动填充城市；若手动修改城市会实时校验字母是否匹配。
- **查找功能**：
  - 折半查找：需先排序；当未排序时系统会提示是否马上排序。
  - 前缀查找：输入 `辽B`、`辽B72` 等即可模糊匹配。
  - 城市查找：直接选择下拉框或输入城市名。
- **性能统计 / 数据验证**：结果会同步显示在右侧日志和弹窗中，提供详细耗时、非法/重复车牌列表等。

---

## 8. 数据/文件格式

### 8.1 文本导入
```
辽A1234B 沈阳 张三
辽B72C9D 大连 李四
```

### 8.2 CSV 导出
```csv
车牌号,城市,车主
辽A1234B,沈阳,张三
辽B72C9D,大连,李四
```

系统会自动过滤非法车牌（格式不符或包含 I/O）并给出提示。

---

## 9. 测试

构建后直接运行：
```bash
./bin/plate_tests
```

测试覆盖内容：
1. 工具函数（车牌格式、大小写转换等）
2. 链式基数排序正确性
3. 查找算法（顺序 / 折半 / 前缀）
4. 数据库 CRUD 与非法数据过滤
5. 城市分块索引
6. 性能基准对比

---

## 10. 复杂度 & 性能分析

| 操作 | 时间复杂度 | 空间复杂度 | 说明 |
| ---- | ---------- | ---------- | ---- |
| 链式基数排序 | O(d × n) | O(n + r) | d=7（车牌位数），r=36（桶） |
| 折半查找 | O(log n) | O(1) | 需先排序 |
| 顺序查找 | O(n) | O(1) | 未排序时备用 |
| 城市分块索引 | O(log m + k) | O(m) | m=城市数，k=块内记录数 |
| 前缀查找 | O(n) | O(k) | k=匹配结果数 |

性能统计模块会实时记录排序、查找的耗时与比较次数，数据验证模块会统计非法 / 重复 / 城市不匹配的具体列表，方便提交性能报告与调试日志。

---

## 11. 注意事项

1. **车牌格式**：必须是“辽 + 字母(A-Z, 排除 I/O) + 5 位数字或字母(排除 I/O)”。
2. **折半查找**：需要先执行链式基数排序。
3. **城市查找**：首次使用会提示自动建立城市分块索引。
4. **删除 / 清空**：不可恢复，操作前会有提示。
5. **GUI 依赖 Qt**：若只需 CLI，可不安装 Qt。

---

## 12. 许可证

本项目仅供教学和课程设计使用，不建议直接用于生产环境。

欢迎在学习过程中继续扩展：例如接入数据库、添加网络接口、制作更多可视化统计等。祝开发顺利！
